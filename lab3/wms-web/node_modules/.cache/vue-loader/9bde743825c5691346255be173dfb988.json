{"remainingRequest":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Login.vue","mtime":1704893050448},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1704530835864},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1704530838239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJMb2dpbiIsCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBjb25maXJtX2Rpc2FibGVkOmZhbHNlLAogICAgICAgICAgICBsb2dpbkZvcm06ewogICAgICAgICAgICAgICAgbm86JycsCiAgICAgICAgICAgICAgICBwYXNzd29yZDonJwogICAgICAgICAgICB9LAogICAgICAgICAgICBydWxlczp7CiAgICAgICAgICAgICAgICBubzogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WvhueggScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewoKICAgICAgICBjb25maXJtKCl7CiAgICAgICAgICAgIHRoaXMuY29uZmlybV9kaXNhYmxlZD10cnVlOwogICAgICAgICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgeyAvL3ZhbGlk5oiQ5Yqf5Li6dHJ1Ze+8jOWksei0peS4umZhbHNlCiAgICAgICAgICAgICAgICAgICAgLy/ljrvlkI7lj7Dpqozor4HnlKjmiLflkI3lr4bnoIEKICAgICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGh0dHBVcmwrJy91c2VyL2xvZ2luJyx0aGlzLmxvZ2luRm9ybSkudGhlbihyZXM9PnJlcy5kYXRhKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5jb2RlPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5a2Y5YKoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJDdXJVc2VyIixKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5tZW51KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRNZW51IixyZXMuZGF0YS5tZW51KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ot7PovazliLDkuLvpobUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvSW5kZXgnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1fZGlzYWJsZWQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5qCh6aqM5aSx6LSl77yM55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+v77yBJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maXJtX2Rpc2FibGVkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmoKHpqozlpLHotKUnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICB9LAogICAgICAgIHJlZ2lzdGVyKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvUmVnaXN0ZXInKTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"loginBody\">\n        <div class=\"loginDiv\">\n            <div class=\"login-content\">\n                <h1 class=\"login-title\">用户登录</h1>\n                <el-form :model=\"loginForm\" label-width=\"100px\"\n                         :rules=\"rules\" ref=\"loginForm\">\n                    <el-form-item label=\"账号\" prop=\"name\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"loginForm.no\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"密码\" prop=\"password\">\n                        <el-input style=\"width: 200px\" type=\"password\" v-model=\"loginForm.password\"\n                                  show-password autocomplete=\"off\" size=\"small\" @keyup.enter.native=\"confirm\"></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"register\" :disabled=\"confirm_disabled\">注 册</el-button>\n                        <el-button type=\"primary\" @click=\"confirm\" :disabled=\"confirm_disabled\">登 录</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: \"Login\",\n    data(){\n        return{\n            confirm_disabled:false,\n            loginForm:{\n                no:'',\n                password:''\n            },\n            rules:{\n                no: [\n                    { required: true, message: '请输入账号', trigger: 'blur' }\n                ],\n                password: [\n                    { required: true, message: '请输密码', trigger: 'blur' }\n                ],\n            }\n        }\n    },\n    methods:{\n\n        confirm(){\n            this.confirm_disabled=true;\n            this.$refs.loginForm.validate((valid) => {\n                if (valid) { //valid成功为true，失败为false\n                    //去后台验证用户名密码\n                    this.$axios.post(this.$httpUrl+'/user/login',this.loginForm).then(res=>res.data).then(res=>{\n                        console.log(res)\n                        if(res.code==1){\n                            //存储\n                            sessionStorage.setItem(\"CurUser\",JSON.stringify(res.data.user))\n\n                            console.log(res.data.menu)\n                            this.$store.commit(\"setMenu\",res.data.menu)\n                            //跳转到主页\n                            this.$router.replace('/Index');\n                        }else{\n                            this.confirm_disabled=false;\n                            alert('校验失败，用户名或密码错误！');\n                            return false;\n                        }\n                    });\n                } else {\n                    this.confirm_disabled=false;\n                    console.log('校验失败');\n                    return false;\n                }\n            });\n\n        },\n        register(){\n            this.$router.replace('/Register');\n        }\n    }\n}\n</script>\n\n<style scoped>\n.loginBody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #B3C0D1;\n}\n.loginDiv {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -200px;\n    margin-left: -250px;\n    width: 450px;\n    height: 330px;\n    background: #fff;\n    border-radius: 5%;\n\n}\n.login-title {\n    margin: 20px 0;\n    text-align: center;\n}\n.login-content {\n    width: 400px;\n    height: 250px;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n}\n</style>"]}]}