{"remainingRequest":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Register.vue","mtime":1704892664800},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1704530835864},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1704530838239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJyZWdpc3RlciIsCiAgICBkYXRhKCl7CiAgICAgICAgbGV0IGNoZWNrRHVwbGljYXRlTm8gPShydWxlLHZhbHVlLGNhbGxiYWNrKT0+ewogICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQodGhpcy4kaHR0cFVybCsiL3VzZXIvZmluZEJ5Tm8/bm89Iit0aGlzLnJlZ2lzdGVyRm9ybS5ubykudGhlbihyZXM9PnJlcy5kYXRhKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgaWYocmVzLmNvZGUhPTEpewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6LSm5Y+35bey57uP5a2Y5ZyoJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgICAgbGV0IGNoZWNrRHVwbGljYXRlTmFtZSA9KHJ1bGUsdmFsdWUsY2FsbGJhY2spPT57CiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLiRodHRwVXJsKyIvdXNlci9maW5kQnlOYW1lP25hbWU9Iit0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lKS50aGVuKHJlcz0+cmVzLmRhdGEpLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICBpZihyZXMuY29kZSE9MSl7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCflkI3lrZflt7Lnu4/lrZjlnKgnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGNvbmZpcm1fZGlzYWJsZWQ6ZmFsc2UsCiAgICAgICAgICAgIHJlZ2lzdGVyRm9ybTp7CiAgICAgICAgICAgICAgICBubzonJywKICAgICAgICAgICAgICAgIG5hbWU6JycsCiAgICAgICAgICAgICAgICBwYXNzd29yZDonJwogICAgICAgICAgICB9LAogICAgICAgICAgICBydWxlczp7CiAgICAgICAgICAgICAgICBubzogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgICAgICB7dmFsaWRhdG9yOmNoZWNrRHVwbGljYXRlTm8sIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBuYW1lOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWQjeWtlycsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgICAgICAgICAgIHt2YWxpZGF0b3I6Y2hlY2tEdXBsaWNhdGVOYW1lLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICAgICAgICAgICAge21pbjogNiwgbWF4OiAyMCwgbWVzc2FnZTogJ+mVv+W6puWcqCA2IOWIsCAyMCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CgogICAgICAgIHJlZ2lzdGVyKCl7CiAgICAgICAgICAgIHRoaXMuY29uZmlybV9kaXNhYmxlZD10cnVlOwogICAgICAgICAgICB0aGlzLiRyZWZzLnJlZ2lzdGVyRm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgeyAvL3ZhbGlk5oiQ5Yqf5Li6dHJ1Ze+8jOWksei0peS4umZhbHNlCiAgICAgICAgICAgICAgICAgICAgLy/ljrvlkI7lj7Dpqozor4HnlKjmiLflkI3lr4bnoIEKICAgICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGh0dHBVcmwrJy91c2VyL3JlZ2lzdGVyJyx0aGlzLnJlZ2lzdGVyRm9ybSkudGhlbihyZXM9PnJlcy5kYXRhKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5jb2RlPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6Lez6L2s5Yiw55m75b2VCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHttZXNzYWdlOiAn5rOo5YaM5oiQ5Yqf77yBJywgdHlwZTogJ3N1Y2Nlc3MnfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnLycpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybV9kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfms6jlhozlpLHotKXvvIHor7fph43or5UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1fZGlzYWJsZWQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+azqOWGjOWksei0pScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgIH0sCiAgICAgICAgY2FuY2VsKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"loginBody\">\n        <div class=\"loginDiv\">\n            <div class=\"login-content\">\n                <h1 class=\"login-title\">用户注册</h1>\n                <el-form :model=\"registerForm\" label-width=\"100px\"\n                         :rules=\"rules\" ref=\"registerForm\">\n                    <el-form-item label=\"账号\" prop=\"no\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"registerForm.no\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"名字\" prop=\"name\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"registerForm.name\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"密码\" prop=\"password\">\n                        <el-input style=\"width: 200px\" type=\"password\" v-model=\"registerForm.password\"\n                                  show-password autocomplete=\"off\" size=\"small\" ></el-input>\n                    </el-form-item>\n\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"cancel\" :disabled=\"confirm_disabled\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"register\" :disabled=\"confirm_disabled\">注 册</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: \"register\",\n    data(){\n        let checkDuplicateNo =(rule,value,callback)=>{\n            this.$axios.get(this.$httpUrl+\"/user/findByNo?no=\"+this.registerForm.no).then(res=>res.data).then(res=>{\n                if(res.code!=1){\n                    callback()\n                }else{\n                    callback(new Error('账号已经存在'));\n                }\n            })\n        };\n        let checkDuplicateName =(rule,value,callback)=>{\n            this.$axios.get(this.$httpUrl+\"/user/findByName?name=\"+this.registerForm.name).then(res=>res.data).then(res=>{\n                if(res.code!=1){\n                    callback()\n                }else{\n                    callback(new Error('名字已经存在'));\n                }\n            })\n        };\n        return{\n            confirm_disabled:false,\n            registerForm:{\n                no:'',\n                name:'',\n                password:''\n            },\n            rules:{\n                no: [\n                    { required: true, message: '请输入账号', trigger: 'blur' },\n                    {validator:checkDuplicateNo, trigger: 'blur'}\n                ],\n                name: [\n                    { required: true, message: '请输入名字', trigger: 'blur' },\n                    {validator:checkDuplicateName, trigger: 'blur'}\n                ],\n                password: [\n                    { required: true, message: '请输密码', trigger: 'blur' },\n                    {min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur'}\n                ]\n            }\n        }\n    },\n    methods:{\n\n        register(){\n            this.confirm_disabled=true;\n            this.$refs.registerForm.validate((valid) => {\n                if (valid) { //valid成功为true，失败为false\n                    //去后台验证用户名密码\n                    this.$axios.post(this.$httpUrl+'/user/register',this.registerForm).then(res=>res.data).then(res=>{\n                        console.log(res)\n                        if(res.code==1){\n                            //跳转到登录\n                            this.$message({message: '注册成功！', type: 'success'});\n                            this.$router.replace('/');\n                        }else{\n                            this.confirm_disabled=false;\n                            alert('注册失败！请重试');\n                            return false;\n                        }\n                    });\n                } else {\n                    this.confirm_disabled=false;\n                    console.log('注册失败');\n                    return false;\n                }\n            });\n\n        },\n        cancel(){\n            this.$router.replace('/');\n        }\n    }\n}\n</script>\n\n<style scoped>\n.loginBody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #B3C0D1;\n}\n.loginDiv {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -200px;\n    margin-left: -250px;\n    width: 450px;\n    height: 330px;\n    background: #fff;\n    border-radius: 5%;\n\n}\n.login-title {\n    margin: 20px 0;\n    text-align: center;\n}\n.login-content {\n    width: 400px;\n    height: 250px;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n}\n</style>"]}]}