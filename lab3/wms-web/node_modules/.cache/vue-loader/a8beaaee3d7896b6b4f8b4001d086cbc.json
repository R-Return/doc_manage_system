{"remainingRequest":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Register.vue?vue&type=style&index=0&id=7bf3755a&scoped=true&lang=css&","dependencies":[{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Register.vue","mtime":1704892664800},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1704530834267},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1704530842822},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\postcss-loader\\src\\index.js","mtime":1704530835041},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1704530838239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5sb2dpbkJvZHkgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQjNDMEQxOwp9Ci5sb2dpbkRpdiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDUwJTsKICAgIGxlZnQ6IDUwJTsKICAgIG1hcmdpbi10b3A6IC0yMDBweDsKICAgIG1hcmdpbi1sZWZ0OiAtMjUwcHg7CiAgICB3aWR0aDogNDUwcHg7CiAgICBoZWlnaHQ6IDMzMHB4OwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIGJvcmRlci1yYWRpdXM6IDUlOwoKfQoubG9naW4tdGl0bGUgewogICAgbWFyZ2luOiAyMHB4IDA7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmxvZ2luLWNvbnRlbnQgewogICAgd2lkdGg6IDQwMHB4OwogICAgaGVpZ2h0OiAyNTBweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMjVweDsKICAgIGxlZnQ6IDI1cHg7Cn0K"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"loginBody\">\n        <div class=\"loginDiv\">\n            <div class=\"login-content\">\n                <h1 class=\"login-title\">用户注册</h1>\n                <el-form :model=\"registerForm\" label-width=\"100px\"\n                         :rules=\"rules\" ref=\"registerForm\">\n                    <el-form-item label=\"账号\" prop=\"no\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"registerForm.no\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"名字\" prop=\"name\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"registerForm.name\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"密码\" prop=\"password\">\n                        <el-input style=\"width: 200px\" type=\"password\" v-model=\"registerForm.password\"\n                                  show-password autocomplete=\"off\" size=\"small\" ></el-input>\n                    </el-form-item>\n\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"cancel\" :disabled=\"confirm_disabled\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"register\" :disabled=\"confirm_disabled\">注 册</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: \"register\",\n    data(){\n        let checkDuplicateNo =(rule,value,callback)=>{\n            this.$axios.get(this.$httpUrl+\"/user/findByNo?no=\"+this.registerForm.no).then(res=>res.data).then(res=>{\n                if(res.code!=1){\n                    callback()\n                }else{\n                    callback(new Error('账号已经存在'));\n                }\n            })\n        };\n        let checkDuplicateName =(rule,value,callback)=>{\n            this.$axios.get(this.$httpUrl+\"/user/findByName?name=\"+this.registerForm.name).then(res=>res.data).then(res=>{\n                if(res.code!=1){\n                    callback()\n                }else{\n                    callback(new Error('名字已经存在'));\n                }\n            })\n        };\n        return{\n            confirm_disabled:false,\n            registerForm:{\n                no:'',\n                name:'',\n                password:''\n            },\n            rules:{\n                no: [\n                    { required: true, message: '请输入账号', trigger: 'blur' },\n                    {validator:checkDuplicateNo, trigger: 'blur'}\n                ],\n                name: [\n                    { required: true, message: '请输入名字', trigger: 'blur' },\n                    {validator:checkDuplicateName, trigger: 'blur'}\n                ],\n                password: [\n                    { required: true, message: '请输密码', trigger: 'blur' },\n                    {min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur'}\n                ]\n            }\n        }\n    },\n    methods:{\n\n        register(){\n            this.confirm_disabled=true;\n            this.$refs.registerForm.validate((valid) => {\n                if (valid) { //valid成功为true，失败为false\n                    //去后台验证用户名密码\n                    this.$axios.post(this.$httpUrl+'/user/register',this.registerForm).then(res=>res.data).then(res=>{\n                        console.log(res)\n                        if(res.code==1){\n                            //跳转到登录\n                            this.$message({message: '注册成功！', type: 'success'});\n                            this.$router.replace('/');\n                        }else{\n                            this.confirm_disabled=false;\n                            alert('注册失败！请重试');\n                            return false;\n                        }\n                    });\n                } else {\n                    this.confirm_disabled=false;\n                    console.log('注册失败');\n                    return false;\n                }\n            });\n\n        },\n        cancel(){\n            this.$router.replace('/');\n        }\n    }\n}\n</script>\n\n<style scoped>\n.loginBody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #B3C0D1;\n}\n.loginDiv {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -200px;\n    margin-left: -250px;\n    width: 450px;\n    height: 330px;\n    background: #fff;\n    border-radius: 5%;\n\n}\n.login-title {\n    margin: 20px 0;\n    text-align: center;\n}\n.login-content {\n    width: 400px;\n    height: 250px;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n}\n</style>"]}]}