{"remainingRequest":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\wms-web\\src\\components\\Share.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\wms-web\\src\\components\\Share.vue","mtime":1704882339965},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1704530835864},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1704530838239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBmaWxlRG93bmxvYWQgZnJvbSAianMtZmlsZS1kb3dubG9hZCI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykgewogIC8vIOWIm+W7umF4aW9z55qE5a6e5L6LCiAgY29uc3QgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA5MCcsIC8vIOi/meS4quaYr+WQjuerr+eahGlw5Zyw5Z2ACiAgfSk7CiAgcmV0dXJuIGluc3RhbmNlKGNvbmZpZyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRSZXN1bHQocm93KSB7CiAgcmV0dXJuIHJlcXVlc3QoewogICAgdXJsOiAnY29tcC9nZXRSZXN1bHQnLAogICAgbWV0aG9kOiAncG9zdCcsCiAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicsCiAgICBkYXRhOiB7CiAgICAgIHJlc3VsdGZpbGU6IHJvdy5maWxlbmFtZSwKICAgICAgdXNlcklkOiByb3cuc2hhcmVGcm9tCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNoYXJlRmlsZTonJywKICAgICAgc2VsZWN0ZWRUYWdzOiBbXSwKICAgICAgdGFnczogWyLmuLjmiI8iLCAi5a2m5LmgIiwgIuWtpuacryIsICLlqLHkuZAiLCAi5bel5L2cIl0sCiAgICAgIHNlYXJjaFZhbHVlOiAnJywKICAgICAgdXNlcjogSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdDdXJVc2VyJykpLAogICAgICBmaWxlTmFtZTogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6ZmFsc2UsCiAgICAgIHNoYXJlVXJsOiAnJywKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgcGFnZU51bTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoVXNlclN1Z2dlc3Rpb25zKHF1ZXJ5U3RyaW5nLCBjYWxsYmFjaykgewogICAgICAvLyDku47lkI7lj7Dojrflj5bnlKjmiLflkI3liJfooagKICAgICAgLy8g6K+35qC55o2u5L2g55qE5a6e6ZmF5oOF5Ya15L+u5pS55LiL6Z2i55qE6K+35rGC5Zyw5Z2A5ZKM5Y+C5pWwCiAgICAgIGNvbnN0IHVybCA9IHRoaXMuJGh0dHBVcmwgKyAnL3VzZXIvZ2V0VXNlck5hbWVUb3AxMCc7CiAgICAgIGF4aW9zCiAgICAgICAgICAuZ2V0KHVybCwgeyBwYXJhbXM6IHsgdXNlck5hbWU6IHF1ZXJ5U3RyaW5nIH0gfSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc3QgdXNlcnMgPSByZXNwb25zZS5kYXRhLm1hcCh1c2VyID0+ICh7IHZhbHVlOiB1c2VyLCBsYWJlbDogdXNlciB9KSk7CiAgICAgICAgICAgIGNhbGxiYWNrKHVzZXJzKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgY2FsbGJhY2soW10pOwogICAgICAgICAgfSk7CiAgfSwKICAgIHJlc2V0UGFyYW0oKSB7CiAgICAgIHRoaXMuZmlsZU5hbWUgPSAnJwogICAgICB0aGlzLnNlbGVjdGVkVGFncyA9W10KICAgIH0sCiAgICBkb3dubG9hZFJlc3VsdChyb3cpIHsKICAgICAgY29uc29sZS5sb2coIuWHhuWkh+S4i+i9vSIpCiAgICAgIGNvbnNvbGUubG9nKHJvdykKICAgICAgZ2V0UmVzdWx0KHJvdykudGhlbihyZXMgPT4gewogICAgICAgIGZpbGVEb3dubG9hZChyZXMuZGF0YSwgcm93LmZpbGVuYW1lKTsgLy8g5L2/55SoanMtZmlsZS1kb3dubG9hZOadpeaOpeaUtuS6jOi/m+WItua1geeEtuWQjuS4i+i9vQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsKGlkKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLiRodHRwVXJsICsgJy9jb21wL2RlbDE/aWQ9JyArIGlkKS50aGVuKHJlcyA9PiByZXMuZGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMSkgewoKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5oiQ5Yqf77yBJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubG9hZFBvc3QoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOWksei0pe+8gScsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgIH0pCiAgICB9LAogICAgLy8gc2hhcmUocm93KXsKICAgIC8vICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7IC8vIOWIm+W7uuS4gOS4qumakOiXj2lucHV077yI6YeN6KaB77yB77yJCiAgICAvLyAgICAgaW5wdXQudmFsdWUgPSAic2hhcmVGcm9tJCIrcm93LnVzZXJpZCsiJCIrcm93LmZpbGV1cmw7IC8vIOi1i+WAvAogICAgLy8gICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgLy8gICAgIGlucHV0LnNlbGVjdCgpOyAvLyDpgInmi6nlr7nosaEKICAgIC8vICAgICBpZiAoZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKSkgewogICAgLy8gICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOyAvLyDmiafooYzmtY/op4jlmajlpI3liLblkb3ku6QKICAgIC8vICAgICAgICAgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICflpI3liLbmiJDlip/vvIzor7flj5HpgIHnu5nlhbbku5bnlKjmiLcnLCB0eXBlOiAnc3VjY2VzcycgfSk7CiAgICAvLyAgICAgfQogICAgLy8gICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaW5wdXQpOwogICAgLy8gfSwKICAgIC8vIGFjY2VwdFNoYXJlKCl7CiAgICAvLyAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgIC8vICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NoYXJlVXJsJywgdGhpcy5zaGFyZVVybCk7IC8vIOimgeS4iuS8oOeahOaWh+S7tgogICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcklkJywgdGhpcy51c2VyLmlkKTsgLy8g55So5oi3aWQKICAgIC8vICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGh0dHBVcmwrJy9jb21wL3NoYXJlJywgZm9ybURhdGEpLnRoZW4ocmVzPT5yZXMuZGF0YSkudGhlbihyZXM9PiB7CiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgIC8vICAgICAgICAgaWYgKHJlcy5jb2RlID09IDEpIHsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyB9LAogICAgc2hvd1NoYXJlRGlhbG9nKHJvdykgewogICAgICB0aGlzLnNoYXJlRmlsZSA9IHJvdwogICAgICB0aGlzLnNlYXJjaFZhbHVlID0gJycKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIHNoYXJlKCkgewogICAgICAvLyDlnKjov5nph4zmiafooYzliIbkuqvmk43kvZwKICAgICAgY29uc29sZS5sb2codGhpcy5zaGFyZUZpbGUpCiAgICAgIHRoaXMuc2hhcmVGaWxlLmlkID0gbnVsbAogICAgICB0aGlzLiRzZXQodGhpcy5zaGFyZUZpbGUsICd1c2VyTmFtZScsIHRoaXMuc2VhcmNoVmFsdWUpCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kaHR0cFVybCArICcvY29tcC9zYXZlU2hhcmUnLCB0aGlzLnNoYXJlRmlsZSkudGhlbihyZXMgPT4gcmVzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliIbkuqvmiJDlip8iKQogICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJwogICAgICAgICAgdGhpcy5zaGFyZUZpbGUgPSAnJwogICAgICB9KQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBzZWFyY2hVc2VycygpIHsKICAgICAgaWYgKHRoaXMuc2hhcmVVc2VyTmFtZS50cmltKCkpIHsKICAgICAgICB0aGlzLiRheGlvcy5nZXQoYCR7dGhpcy4kaHR0cFVybH0vdXNlci9zZWFyY2g/bmFtZT0ke3RoaXMuc2hhcmVVc2VyTmFtZS50cmltKCl9YCkudGhlbihyZXMgPT4gcmVzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgY29uc3QgdXNlckxpc3QgPSByZXM7CiAgICAgICAgICAgIHRoaXMuJGF1dG9jb21wbGV0ZSgn6K+36YCJ5oup6KaB5YiG5Lqr55qE55So5oi3JywgdXNlckxpc3QsIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICAgIH0pLnRoZW4oKHsgdmFsdWUgfSkgPT4gewogICAgICAgICAgICAgIC8vIOeUqOaIt+mAieaLqeWQjuabtOaWsOmAieS4reeahOeUqOaIt0lECiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IHZhbHVlOwogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IG51bGw7IC8vIOeUqOaIt+WPlua2iOmAieaLqeaXtua4heepuumAieS4reeahOeUqOaIt0lECiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IG51bGw7IC8vIOacquaJvuWIsOWMuemFjeeUqOaIt+aXtua4heepuumAieS4reeahOeUqOaIt0lECiAgICAgICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5pyq5om+5Yiw5Yy56YWN55qE55So5oi3Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkUG9zdCgpIHsKICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRodHRwVXJsICsgJy9jb21wL2xpc3RQYWdlQzInLCB7CiAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlci5pZCwKICAgICAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLAogICAgICAgICAgbGFiZWw6IHRoaXMuc2VsZWN0ZWRUYWdzCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiByZXMuZGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMSkgewogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YQogICAgICAgICAgY29uc29sZS5sb2codGhpcy50YWJsZURhdGEpCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCfojrflj5bmlbDmja7lpLHotKUnKQogICAgICAgIH0KCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2coYOavj+mhtSAke3ZhbH0g5p2hYCk7CiAgICAgIHRoaXMucGFnZU51bSA9IDEKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbAogICAgICB0aGlzLmxvYWRQb3N0KCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKTsKICAgICAgdGhpcy5wYWdlTnVtID0gdmFsCiAgICAgIHRoaXMubG9hZFBvc3QoKQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRQb3N0KCkKICB9Cgp9Cg=="},{"version":3,"sources":["Share.vue"],"names":[],"mappings":";AAmEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Share.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div style=\"margin-bottom: 5px;\">\n      <el-input v-model=\"fileName\" placeholder=\"请输入文件名\" suffix-icon=\"el-icon-search\" style=\"width: 200px;\"\n                @keyup.enter.native=\"loadPost\"></el-input>\n\n        <el-select v-model=\"selectedTags\" multiple placeholder=\"请选择文件标签\" style=\"margin-left: 5px;\">\n          <el-option v-for=\"tag in tags\" :key=\"tag\" :label=\"tag\" :value=\"tag\"></el-option>\n        </el-select>\n\n      <el-button type=\"primary\" style=\"margin-left: 5px;\" @click=\"loadPost\">查询</el-button>\n      <el-button type=\"success\" @click=\"resetParam\">重置</el-button>\n    </div>\n    <el-table :data=\"tableData\"\n              :header-cell-style=\"{ background: '#f2f5fc', color: '#555555' }\"\n              border\n    >\n      <!--            <el-table-column prop=\"id\" label=\"ID\" width=\"60\">-->\n      <!--            </el-table-column>-->\n      <el-table-column prop=\"filename\" label=\"文件名\" width=\"300\">\n      </el-table-column>\n      <el-table-column prop=\"fileurl\" label=\"路径\">\n      </el-table-column>\n      <el-table-column prop=\"label\" label=\"标签\">\n      </el-table-column>\n\n      <el-table-column prop=\"operate\" label=\"操作\" width=\"210\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"small\" type=\"success\" @click=\"downloadResult(scope.row)\">下载</el-button>\n          <el-popconfirm\n              title=\"确定删除吗？\"\n              @confirm=\"del(scope.row.id)\"\n              style=\"margin-left: 5px;\"\n          >\n            <el-button slot=\"reference\" size=\"small\" type=\"danger\">删除</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20,30]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n    </el-pagination>\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"分享\" width=\"20%\">\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"share\">确定</el-button>\n      </span>\n      <div>\n        <p>请输入要分享的用户：</p>\n        <el-autocomplete\n            v-model=\"searchValue\"\n            :fetch-suggestions=\"fetchUserSuggestions\"\n            placeholder=\"请输入用户名\"\n            :trigger-on-focus=\"false\"\n        ></el-autocomplete>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport fileDownload from \"js-file-download\";\nimport axios from \"axios\";\n\nfunction request(config) {\n  // 创建axios的实例\n  const instance = axios.create({\n    baseURL: 'http://localhost:8090', // 这个是后端的ip地址\n  });\n  return instance(config);\n}\n\nexport function getResult(row) {\n  return request({\n    url: 'comp/getResult',\n    method: 'post',\n    responseType: 'arraybuffer',\n    data: {\n      resultfile: row.filename,\n      userId: row.shareFrom\n    }\n  });\n}\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      shareFile:'',\n      selectedTags: [],\n      tags: [\"游戏\", \"学习\", \"学术\", \"娱乐\", \"工作\"],\n      searchValue: '',\n      user: JSON.parse(sessionStorage.getItem('CurUser')),\n      fileName: '',\n      dialogVisible:false,\n      shareUrl: '',\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n    }\n  },\n  methods: {\n    fetchUserSuggestions(queryString, callback) {\n      // 从后台获取用户名列表\n      // 请根据你的实际情况修改下面的请求地址和参数\n      const url = this.$httpUrl + '/user/getUserNameTop10';\n      axios\n          .get(url, { params: { userName: queryString } })\n          .then(response => {\n            const users = response.data.map(user => ({ value: user, label: user }));\n            callback(users);\n          })\n          .catch(error => {\n            console.error(error);\n            callback([]);\n          });\n  },\n    resetParam() {\n      this.fileName = ''\n      this.selectedTags =[]\n    },\n    downloadResult(row) {\n      console.log(\"准备下载\")\n      console.log(row)\n      getResult(row).then(res => {\n        fileDownload(res.data, row.filename); // 使用js-file-download来接收二进制流然后下载\n      }).catch(err => {\n        this.$message.error(err);\n      });\n    },\n    del(id) {\n      this.$axios.get(this.$httpUrl + '/comp/del1?id=' + id).then(res => res.data).then(res => {\n        console.log(res)\n        if (res.code == 1) {\n\n          this.$message({\n            message: '操作成功！',\n            type: 'success'\n          });\n          this.loadPost()\n        } else {\n          this.$message({\n            message: '操作失败！',\n            type: 'error'\n          });\n        }\n\n      })\n    },\n    // share(row){\n    //     const input = document.createElement('input'); // 创建一个隐藏input（重要！）\n    //     input.value = \"shareFrom$\"+row.userid+\"$\"+row.fileurl; // 赋值\n    //     document.body.appendChild(input);\n    //     input.select(); // 选择对象\n    //     if (document.execCommand('copy')) {\n    //         document.execCommand('copy'); // 执行浏览器复制命令\n    //         this.$message({ message: '复制成功，请发送给其他用户', type: 'success' });\n    //     }\n    //     document.body.removeChild(input);\n    // },\n    // acceptShare(){\n    //     const formData = new FormData();\n    //     formData.append('shareUrl', this.shareUrl); // 要上传的文件\n    //     formData.append('userId', this.user.id); // 用户id\n    //     this.$axios.post(this.$httpUrl+'/comp/share', formData).then(res=>res.data).then(res=> {\n    //         console.log(res)\n    //         if (res.code == 1) {\n    //         }\n    //     })\n    // },\n    showShareDialog(row) {\n      this.shareFile = row\n      this.searchValue = ''\n      this.dialogVisible = true\n    },\n    share() {\n      // 在这里执行分享操作\n      console.log(this.shareFile)\n      this.shareFile.id = null\n      this.$set(this.shareFile, 'userName', this.searchValue)\n      this.$axios.post(this.$httpUrl + '/comp/saveShare', this.shareFile).then(res => res.data).then(res => {\n         console.log(res)\n          this.$message.success(\"分享成功\")\n           this.searchValue = ''\n          this.shareFile = ''\n      })\n      this.dialogVisible = false;\n    },\n    searchUsers() {\n      if (this.shareUserName.trim()) {\n        this.$axios.get(`${this.$httpUrl}/user/search?name=${this.shareUserName.trim()}`).then(res => res.data).then(res => {\n          if (res && res.length > 0) {\n            const userList = res;\n            this.$autocomplete('请选择要分享的用户', userList, {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n            }).then(({ value }) => {\n              // 用户选择后更新选中的用户ID\n              this.selectedUserId = value;\n            }).catch(() => {\n              this.selectedUserId = null; // 用户取消选择时清空选中的用户ID\n            });\n          } else {\n            this.selectedUserId = null; // 未找到匹配用户时清空选中的用户ID\n            // this.$message.warning('未找到匹配的用户');\n          }\n        });\n      }\n    },\n    loadPost() {\n      this.$axios.post(this.$httpUrl + '/comp/listPageC2', {\n        pageSize: this.pageSize,\n        pageNum: this.pageNum,\n        param: {\n          userId: this.user.id,\n          fileName: this.fileName,\n          label: this.selectedTags\n        }\n      }).then(res => res.data).then(res => {\n        console.log(res)\n        if (res.code == 1) {\n          this.tableData = res.data\n          console.log(this.tableData)\n          this.total = res.total\n        } else {\n          alert('获取数据失败')\n        }\n\n      })\n    },\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n      this.pageNum = 1\n      this.pageSize = val\n      this.loadPost()\n    },\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.pageNum = val\n      this.loadPost()\n    },\n  },\n  mounted() {\n    this.loadPost()\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}