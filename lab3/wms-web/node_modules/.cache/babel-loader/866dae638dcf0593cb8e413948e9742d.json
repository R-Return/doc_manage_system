{"remainingRequest":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\babel-loader\\lib\\index.js!D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\src\\components\\Register.vue","mtime":1704892664800},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\babel.config.js","mtime":1658915792000},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1704530835864},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"D:\\courseFile\\高程\\lab3\\wms\\wms-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1704530838239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJlZ2lzdGVyIiwKCiAgZGF0YSgpIHsKICAgIGxldCBjaGVja0R1cGxpY2F0ZU5vID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICB0aGlzLiRheGlvcy5nZXQodGhpcy4kaHR0cFVybCArICIvdXNlci9maW5kQnlObz9ubz0iICsgdGhpcy5yZWdpc3RlckZvcm0ubm8pLnRoZW4ocmVzID0+IHJlcy5kYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlICE9IDEpIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6LSm5Y+35bey57uP5a2Y5ZyoJykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIGxldCBjaGVja0R1cGxpY2F0ZU5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLiRodHRwVXJsICsgIi91c2VyL2ZpbmRCeU5hbWU/bmFtZT0iICsgdGhpcy5yZWdpc3RlckZvcm0ubmFtZSkudGhlbihyZXMgPT4gcmVzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgIT0gMSkgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCflkI3lrZflt7Lnu4/lrZjlnKgnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgY29uZmlybV9kaXNhYmxlZDogZmFsc2UsCiAgICAgIHJlZ2lzdGVyRm9ybTogewogICAgICAgIG5vOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBubzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpei0puWPtycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrRHVwbGljYXRlTm8sCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZCN5a2XJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogY2hlY2tEdXBsaWNhdGVOYW1lLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlr4bnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiA2LAogICAgICAgICAgbWF4OiAyMCwKICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggNiDliLAgMjAg5Liq5a2X56ymJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgcmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMuY29uZmlybV9kaXNhYmxlZCA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMucmVnaXN0ZXJGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIC8vdmFsaWTmiJDlip/kuLp0cnVl77yM5aSx6LSl5Li6ZmFsc2UKICAgICAgICAgIC8v5Y675ZCO5Y+w6aqM6K+B55So5oi35ZCN5a+G56CBCiAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGh0dHBVcmwgKyAnL3VzZXIvcmVnaXN0ZXInLCB0aGlzLnJlZ2lzdGVyRm9ybSkudGhlbihyZXMgPT4gcmVzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgLy/ot7PovazliLDnmbvlvZUKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfms6jlhozmiJDlip/vvIEnLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy8nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1fZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICBhbGVydCgn5rOo5YaM5aSx6LSl77yB6K+36YeN6K+VJyk7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jb25maXJtX2Rpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZygn5rOo5YaM5aSx6LSlJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgY2FuY2VsKCkgewogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnLycpOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";AAgCA;EACAA,gBADA;;EAEAC;IACA;MACA;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA;MACA,CANA;IAOA,CARA;;IASA;MACA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;MACA,CANA;IAOA,CARA;;IASA;MACAC,uBADA;MAEAC;QACAC,MADA;QAEAL,QAFA;QAGAM;MAHA,CAFA;MAOAC;QACAF,KACA;UAAAG;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAD;QAAA,CAFA,CADA;QAKAV,OACA;UAAAQ;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAD;QAAA,CAFA,CALA;QASAJ,WACA;UAAAE;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAE;UAAAC;UAAAJ;UAAAC;QAAA,CAFA;MATA;IAPA;EAsBA,CA3CA;;EA4CAI;IAEAC;MACA;MACA;QACA;UAAA;UACA;UACA;YACAC;;YACA;cACA;cACA;gBAAAP;gBAAAQ;cAAA;cACA;YACA,CAJA,MAIA;cACA;cACAC;cACA;YACA;UACA,CAXA;QAYA,CAdA,MAcA;UACA;UACAF;UACA;QACA;MACA,CApBA;IAsBA,CA1BA;;IA2BAG;MACA;IACA;;EA7BA;AA5CA","names":["name","data","callback","confirm_disabled","registerForm","no","password","rules","required","message","trigger","validator","min","max","methods","register","console","type","alert","cancel"],"sourceRoot":"src/components","sources":["Register.vue"],"sourcesContent":["<template>\n    <div class=\"loginBody\">\n        <div class=\"loginDiv\">\n            <div class=\"login-content\">\n                <h1 class=\"login-title\">用户注册</h1>\n                <el-form :model=\"registerForm\" label-width=\"100px\"\n                         :rules=\"rules\" ref=\"registerForm\">\n                    <el-form-item label=\"账号\" prop=\"no\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"registerForm.no\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"名字\" prop=\"name\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"registerForm.name\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"密码\" prop=\"password\">\n                        <el-input style=\"width: 200px\" type=\"password\" v-model=\"registerForm.password\"\n                                  show-password autocomplete=\"off\" size=\"small\" ></el-input>\n                    </el-form-item>\n\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"cancel\" :disabled=\"confirm_disabled\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"register\" :disabled=\"confirm_disabled\">注 册</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: \"register\",\n    data(){\n        let checkDuplicateNo =(rule,value,callback)=>{\n            this.$axios.get(this.$httpUrl+\"/user/findByNo?no=\"+this.registerForm.no).then(res=>res.data).then(res=>{\n                if(res.code!=1){\n                    callback()\n                }else{\n                    callback(new Error('账号已经存在'));\n                }\n            })\n        };\n        let checkDuplicateName =(rule,value,callback)=>{\n            this.$axios.get(this.$httpUrl+\"/user/findByName?name=\"+this.registerForm.name).then(res=>res.data).then(res=>{\n                if(res.code!=1){\n                    callback()\n                }else{\n                    callback(new Error('名字已经存在'));\n                }\n            })\n        };\n        return{\n            confirm_disabled:false,\n            registerForm:{\n                no:'',\n                name:'',\n                password:''\n            },\n            rules:{\n                no: [\n                    { required: true, message: '请输入账号', trigger: 'blur' },\n                    {validator:checkDuplicateNo, trigger: 'blur'}\n                ],\n                name: [\n                    { required: true, message: '请输入名字', trigger: 'blur' },\n                    {validator:checkDuplicateName, trigger: 'blur'}\n                ],\n                password: [\n                    { required: true, message: '请输密码', trigger: 'blur' },\n                    {min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur'}\n                ]\n            }\n        }\n    },\n    methods:{\n\n        register(){\n            this.confirm_disabled=true;\n            this.$refs.registerForm.validate((valid) => {\n                if (valid) { //valid成功为true，失败为false\n                    //去后台验证用户名密码\n                    this.$axios.post(this.$httpUrl+'/user/register',this.registerForm).then(res=>res.data).then(res=>{\n                        console.log(res)\n                        if(res.code==1){\n                            //跳转到登录\n                            this.$message({message: '注册成功！', type: 'success'});\n                            this.$router.replace('/');\n                        }else{\n                            this.confirm_disabled=false;\n                            alert('注册失败！请重试');\n                            return false;\n                        }\n                    });\n                } else {\n                    this.confirm_disabled=false;\n                    console.log('注册失败');\n                    return false;\n                }\n            });\n\n        },\n        cancel(){\n            this.$router.replace('/');\n        }\n    }\n}\n</script>\n\n<style scoped>\n.loginBody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #B3C0D1;\n}\n.loginDiv {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -200px;\n    margin-left: -250px;\n    width: 450px;\n    height: 330px;\n    background: #fff;\n    border-radius: 5%;\n\n}\n.login-title {\n    margin: 20px 0;\n    text-align: center;\n}\n.login-content {\n    width: 400px;\n    height: 250px;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n}\n</style>"]}]}