{"remainingRequest":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\wms-web\\src\\components\\Share.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\wms-web\\src\\components\\Share.vue","mtime":1704882339965},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\babel.config.js","mtime":1658915792000},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1704530835864},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704530833875},{"path":"C:\\Users\\admin\\Desktop\\wms-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1704530838239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGZpbGVEb3dubG9hZCBmcm9tICJqcy1maWxlLWRvd25sb2FkIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7CiAgLy8g5Yib5bu6YXhpb3PnmoTlrp7kvosKICBjb25zdCBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgICBiYXNlVVJMOiAnaHR0cDovL2xvY2FsaG9zdDo4MDkwJyAvLyDov5nkuKrmmK/lkI7nq6/nmoRpcOWcsOWdgAoKICB9KTsKICByZXR1cm4gaW5zdGFuY2UoY29uZmlnKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldFJlc3VsdChyb3cpIHsKICByZXR1cm4gcmVxdWVzdCh7CiAgICB1cmw6ICdjb21wL2dldFJlc3VsdCcsCiAgICBtZXRob2Q6ICdwb3N0JywKICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJywKICAgIGRhdGE6IHsKICAgICAgcmVzdWx0ZmlsZTogcm93LmZpbGVuYW1lLAogICAgICB1c2VySWQ6IHJvdy5zaGFyZUZyb20KICAgIH0KICB9KTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hhcmVGaWxlOiAnJywKICAgICAgc2VsZWN0ZWRUYWdzOiBbXSwKICAgICAgdGFnczogWyLmuLjmiI8iLCAi5a2m5LmgIiwgIuWtpuacryIsICLlqLHkuZAiLCAi5bel5L2cIl0sCiAgICAgIHNlYXJjaFZhbHVlOiAnJywKICAgICAgdXNlcjogSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdDdXJVc2VyJykpLAogICAgICBmaWxlTmFtZTogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzaGFyZVVybDogJycsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWw6IDAKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgZmV0Y2hVc2VyU3VnZ2VzdGlvbnMocXVlcnlTdHJpbmcsIGNhbGxiYWNrKSB7CiAgICAgIC8vIOS7juWQjuWPsOiOt+WPlueUqOaIt+WQjeWIl+ihqAogICAgICAvLyDor7fmoLnmja7kvaDnmoTlrp7pmYXmg4XlhrXkv67mlLnkuIvpnaLnmoTor7fmsYLlnLDlnYDlkozlj4LmlbAKICAgICAgY29uc3QgdXJsID0gdGhpcy4kaHR0cFVybCArICcvdXNlci9nZXRVc2VyTmFtZVRvcDEwJzsKICAgICAgYXhpb3MuZ2V0KHVybCwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgdXNlck5hbWU6IHF1ZXJ5U3RyaW5nCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCB1c2VycyA9IHJlc3BvbnNlLmRhdGEubWFwKHVzZXIgPT4gKHsKICAgICAgICAgIHZhbHVlOiB1c2VyLAogICAgICAgICAgbGFiZWw6IHVzZXIKICAgICAgICB9KSk7CiAgICAgICAgY2FsbGJhY2sodXNlcnMpOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgY2FsbGJhY2soW10pOwogICAgICB9KTsKICAgIH0sCgogICAgcmVzZXRQYXJhbSgpIHsKICAgICAgdGhpcy5maWxlTmFtZSA9ICcnOwogICAgICB0aGlzLnNlbGVjdGVkVGFncyA9IFtdOwogICAgfSwKCiAgICBkb3dubG9hZFJlc3VsdChyb3cpIHsKICAgICAgY29uc29sZS5sb2coIuWHhuWkh+S4i+i9vSIpOwogICAgICBjb25zb2xlLmxvZyhyb3cpOwogICAgICBnZXRSZXN1bHQocm93KS50aGVuKHJlcyA9PiB7CiAgICAgICAgZmlsZURvd25sb2FkKHJlcy5kYXRhLCByb3cuZmlsZW5hbWUpOyAvLyDkvb/nlKhqcy1maWxlLWRvd25sb2Fk5p2l5o6l5pS25LqM6L+b5Yi25rWB54S25ZCO5LiL6L29CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIpOwogICAgICB9KTsKICAgIH0sCgogICAgZGVsKGlkKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLiRodHRwVXJsICsgJy9jb21wL2RlbDE/aWQ9JyArIGlkKS50aGVuKHJlcyA9PiByZXMuZGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuY29kZSA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOaIkOWKn++8gScsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxvYWRQb3N0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5aSx6LSl77yBJywKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8gc2hhcmUocm93KXsKICAgIC8vICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7IC8vIOWIm+W7uuS4gOS4qumakOiXj2lucHV077yI6YeN6KaB77yB77yJCiAgICAvLyAgICAgaW5wdXQudmFsdWUgPSAic2hhcmVGcm9tJCIrcm93LnVzZXJpZCsiJCIrcm93LmZpbGV1cmw7IC8vIOi1i+WAvAogICAgLy8gICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgLy8gICAgIGlucHV0LnNlbGVjdCgpOyAvLyDpgInmi6nlr7nosaEKICAgIC8vICAgICBpZiAoZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKSkgewogICAgLy8gICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOyAvLyDmiafooYzmtY/op4jlmajlpI3liLblkb3ku6QKICAgIC8vICAgICAgICAgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICflpI3liLbmiJDlip/vvIzor7flj5HpgIHnu5nlhbbku5bnlKjmiLcnLCB0eXBlOiAnc3VjY2VzcycgfSk7CiAgICAvLyAgICAgfQogICAgLy8gICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaW5wdXQpOwogICAgLy8gfSwKICAgIC8vIGFjY2VwdFNoYXJlKCl7CiAgICAvLyAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgIC8vICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NoYXJlVXJsJywgdGhpcy5zaGFyZVVybCk7IC8vIOimgeS4iuS8oOeahOaWh+S7tgogICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcklkJywgdGhpcy51c2VyLmlkKTsgLy8g55So5oi3aWQKICAgIC8vICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGh0dHBVcmwrJy9jb21wL3NoYXJlJywgZm9ybURhdGEpLnRoZW4ocmVzPT5yZXMuZGF0YSkudGhlbihyZXM9PiB7CiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgIC8vICAgICAgICAgaWYgKHJlcy5jb2RlID09IDEpIHsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyB9LAogICAgc2hvd1NoYXJlRGlhbG9nKHJvdykgewogICAgICB0aGlzLnNoYXJlRmlsZSA9IHJvdzsKICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9ICcnOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKCiAgICBzaGFyZSgpIHsKICAgICAgLy8g5Zyo6L+Z6YeM5omn6KGM5YiG5Lqr5pON5L2cCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2hhcmVGaWxlKTsKICAgICAgdGhpcy5zaGFyZUZpbGUuaWQgPSBudWxsOwogICAgICB0aGlzLiRzZXQodGhpcy5zaGFyZUZpbGUsICd1c2VyTmFtZScsIHRoaXMuc2VhcmNoVmFsdWUpOwogICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGh0dHBVcmwgKyAnL2NvbXAvc2F2ZVNoYXJlJywgdGhpcy5zaGFyZUZpbGUpLnRoZW4ocmVzID0+IHJlcy5kYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIhuS6q+aIkOWKnyIpOwogICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJzsKICAgICAgICB0aGlzLnNoYXJlRmlsZSA9ICcnOwogICAgICB9KTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIHNlYXJjaFVzZXJzKCkgewogICAgICBpZiAodGhpcy5zaGFyZVVzZXJOYW1lLnRyaW0oKSkgewogICAgICAgIHRoaXMuJGF4aW9zLmdldChgJHt0aGlzLiRodHRwVXJsfS91c2VyL3NlYXJjaD9uYW1lPSR7dGhpcy5zaGFyZVVzZXJOYW1lLnRyaW0oKX1gKS50aGVuKHJlcyA9PiByZXMuZGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcyAmJiByZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCB1c2VyTGlzdCA9IHJlczsKICAgICAgICAgICAgdGhpcy4kYXV0b2NvbXBsZXRlKCfor7fpgInmi6nopoHliIbkuqvnmoTnlKjmiLcnLCB1c2VyTGlzdCwgewogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJwogICAgICAgICAgICB9KS50aGVuKCh7CiAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgfSkgPT4gewogICAgICAgICAgICAgIC8vIOeUqOaIt+mAieaLqeWQjuabtOaWsOmAieS4reeahOeUqOaIt0lECiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IHZhbHVlOwogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IG51bGw7IC8vIOeUqOaIt+WPlua2iOmAieaLqeaXtua4heepuumAieS4reeahOeUqOaIt0lECiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IG51bGw7IC8vIOacquaJvuWIsOWMuemFjeeUqOaIt+aXtua4heepuumAieS4reeahOeUqOaIt0lECiAgICAgICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5pyq5om+5Yiw5Yy56YWN55qE55So5oi3Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgbG9hZFBvc3QoKSB7CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kaHR0cFVybCArICcvY29tcC9saXN0UGFnZUMyJywgewogICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICBwYXJhbTogewogICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIuaWQsCiAgICAgICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSwKICAgICAgICAgIGxhYmVsOiB0aGlzLnNlbGVjdGVkVGFncwogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gcmVzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMSkgewogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFibGVEYXRhKTsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCfojrflj5bmlbDmja7lpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKTsKICAgICAgdGhpcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbDsKICAgICAgdGhpcy5sb2FkUG9zdCgpOwogICAgfSwKCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKTsKICAgICAgdGhpcy5wYWdlTnVtID0gdmFsOwogICAgICB0aGlzLmxvYWRQb3N0KCk7CiAgICB9CgogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRQb3N0KCk7CiAgfQoKfTs="},{"version":3,"mappings":"AAmEA;AACA;;AAEA;EACA;EACA;IACAA,gCADA,CACA;;EADA;EAGA;AACA;;AAEA;EACA;IACAC,qBADA;IAEAC,cAFA;IAGAC,2BAHA;IAIAC;MACAC,wBADA;MAEAC;IAFA;EAJA;AASA;AAEA;EACAC,YADA;;EAEAH;IACA;MACAI,aADA;MAEAC,gBAFA;MAGAC,oCAHA;MAIAC,eAJA;MAKAC,mDALA;MAMAC,YANA;MAOAC,oBAPA;MAQAC,YARA;MASAC,aATA;MAUAC,UAVA;MAWAC,YAXA;MAYAC;IAZA;EAcA,CAjBA;;EAkBAC;IACAC;MACA;MACA;MACA;MACAC,MACAC,GADA,CACAtB,GADA,EACA;QAAAuB;UAAAC;QAAA;MAAA,CADA,EAEAC,IAFA,CAEAC;QACA;UAAAC;UAAAC;QAAA;QACAC;MACA,CALA,EAMAC,KANA,CAMAC;QACAC;QACAH;MACA,CATA;IAUA,CAfA;;IAgBAI;MACA;MACA;IACA,CAnBA;;IAoBAC;MACAF;MACAA;MACAG;QACAC,qCADA,CACA;MACA,CAFA,EAEAN,KAFA,CAEAO;QACA;MACA,CAJA;IAKA,CA5BA;;IA6BAC;MACA;QACAN;;QACA;UAEA;YACAO,gBADA;YAEAC;UAFA;UAIA;QACA,CAPA,MAOA;UACA;YACAD,gBADA;YAEAC;UAFA;QAIA;MAEA,CAhBA;IAiBA,CA/CA;;IAgDA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA,CAzEA;;IA0EAC;MACA;MACAV;MACA;MACA;MACA;QACAA;QACA;QACA;QACA;MACA,CALA;MAMA;IACA,CAtFA;;IAuFAW;MACA;QACA;UACA;YACA;YACA;cACAC,uBADA;cAEAC;YAFA,GAGApB,IAHA,CAGA;cAAAE;YAAA;cACA;cACA;YACA,CANA,EAMAG,KANA,CAMA;cACA,2BADA,CACA;YACA,CARA;UASA,CAXA,MAWA;YACA,2BADA,CACA;YACA;UACA;QACA,CAhBA;MAiBA;IACA,CA3GA;;IA4GAgB;MACA;QACA7B,uBADA;QAEAD,qBAFA;QAGA+B;UACA1C,oBADA;UAEAO,uBAFA;UAGAgB;QAHA;MAHA,GAQAH,IARA,CAQAuB,eARA,EAQAvB,IARA,CAQAuB;QACAhB;;QACA;UACA;UACAA;UACA;QACA,CAJA,MAIA;UACAiB;QACA;MAEA,CAlBA;IAmBA,CAhIA;;IAiIAC;MACAlB;MACA;MACA;MACA;IACA,CAtIA;;IAuIAmB;MACAnB;MACA;MACA;IACA;;EA3IA,CAlBA;;EA+JAoB;IACA;EACA;;AAjKA","names":["baseURL","url","method","responseType","data","resultfile","userId","name","shareFile","selectedTags","tags","searchValue","user","fileName","dialogVisible","shareUrl","tableData","pageNum","pageSize","total","methods","fetchUserSuggestions","axios","get","params","userName","then","response","value","label","callback","catch","error","console","resetParam","downloadResult","getResult","fileDownload","err","del","message","type","showShareDialog","share","searchUsers","confirmButtonText","cancelButtonText","loadPost","param","res","alert","handleSizeChange","handleCurrentChange","mounted"],"sourceRoot":"src/components","sources":["Share.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin-bottom: 5px;\">\n      <el-input v-model=\"fileName\" placeholder=\"请输入文件名\" suffix-icon=\"el-icon-search\" style=\"width: 200px;\"\n                @keyup.enter.native=\"loadPost\"></el-input>\n\n        <el-select v-model=\"selectedTags\" multiple placeholder=\"请选择文件标签\" style=\"margin-left: 5px;\">\n          <el-option v-for=\"tag in tags\" :key=\"tag\" :label=\"tag\" :value=\"tag\"></el-option>\n        </el-select>\n\n      <el-button type=\"primary\" style=\"margin-left: 5px;\" @click=\"loadPost\">查询</el-button>\n      <el-button type=\"success\" @click=\"resetParam\">重置</el-button>\n    </div>\n    <el-table :data=\"tableData\"\n              :header-cell-style=\"{ background: '#f2f5fc', color: '#555555' }\"\n              border\n    >\n      <!--            <el-table-column prop=\"id\" label=\"ID\" width=\"60\">-->\n      <!--            </el-table-column>-->\n      <el-table-column prop=\"filename\" label=\"文件名\" width=\"300\">\n      </el-table-column>\n      <el-table-column prop=\"fileurl\" label=\"路径\">\n      </el-table-column>\n      <el-table-column prop=\"label\" label=\"标签\">\n      </el-table-column>\n\n      <el-table-column prop=\"operate\" label=\"操作\" width=\"210\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"small\" type=\"success\" @click=\"downloadResult(scope.row)\">下载</el-button>\n          <el-popconfirm\n              title=\"确定删除吗？\"\n              @confirm=\"del(scope.row.id)\"\n              style=\"margin-left: 5px;\"\n          >\n            <el-button slot=\"reference\" size=\"small\" type=\"danger\">删除</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20,30]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n    </el-pagination>\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"分享\" width=\"20%\">\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"share\">确定</el-button>\n      </span>\n      <div>\n        <p>请输入要分享的用户：</p>\n        <el-autocomplete\n            v-model=\"searchValue\"\n            :fetch-suggestions=\"fetchUserSuggestions\"\n            placeholder=\"请输入用户名\"\n            :trigger-on-focus=\"false\"\n        ></el-autocomplete>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport fileDownload from \"js-file-download\";\nimport axios from \"axios\";\n\nfunction request(config) {\n  // 创建axios的实例\n  const instance = axios.create({\n    baseURL: 'http://localhost:8090', // 这个是后端的ip地址\n  });\n  return instance(config);\n}\n\nexport function getResult(row) {\n  return request({\n    url: 'comp/getResult',\n    method: 'post',\n    responseType: 'arraybuffer',\n    data: {\n      resultfile: row.filename,\n      userId: row.shareFrom\n    }\n  });\n}\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      shareFile:'',\n      selectedTags: [],\n      tags: [\"游戏\", \"学习\", \"学术\", \"娱乐\", \"工作\"],\n      searchValue: '',\n      user: JSON.parse(sessionStorage.getItem('CurUser')),\n      fileName: '',\n      dialogVisible:false,\n      shareUrl: '',\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n    }\n  },\n  methods: {\n    fetchUserSuggestions(queryString, callback) {\n      // 从后台获取用户名列表\n      // 请根据你的实际情况修改下面的请求地址和参数\n      const url = this.$httpUrl + '/user/getUserNameTop10';\n      axios\n          .get(url, { params: { userName: queryString } })\n          .then(response => {\n            const users = response.data.map(user => ({ value: user, label: user }));\n            callback(users);\n          })\n          .catch(error => {\n            console.error(error);\n            callback([]);\n          });\n  },\n    resetParam() {\n      this.fileName = ''\n      this.selectedTags =[]\n    },\n    downloadResult(row) {\n      console.log(\"准备下载\")\n      console.log(row)\n      getResult(row).then(res => {\n        fileDownload(res.data, row.filename); // 使用js-file-download来接收二进制流然后下载\n      }).catch(err => {\n        this.$message.error(err);\n      });\n    },\n    del(id) {\n      this.$axios.get(this.$httpUrl + '/comp/del1?id=' + id).then(res => res.data).then(res => {\n        console.log(res)\n        if (res.code == 1) {\n\n          this.$message({\n            message: '操作成功！',\n            type: 'success'\n          });\n          this.loadPost()\n        } else {\n          this.$message({\n            message: '操作失败！',\n            type: 'error'\n          });\n        }\n\n      })\n    },\n    // share(row){\n    //     const input = document.createElement('input'); // 创建一个隐藏input（重要！）\n    //     input.value = \"shareFrom$\"+row.userid+\"$\"+row.fileurl; // 赋值\n    //     document.body.appendChild(input);\n    //     input.select(); // 选择对象\n    //     if (document.execCommand('copy')) {\n    //         document.execCommand('copy'); // 执行浏览器复制命令\n    //         this.$message({ message: '复制成功，请发送给其他用户', type: 'success' });\n    //     }\n    //     document.body.removeChild(input);\n    // },\n    // acceptShare(){\n    //     const formData = new FormData();\n    //     formData.append('shareUrl', this.shareUrl); // 要上传的文件\n    //     formData.append('userId', this.user.id); // 用户id\n    //     this.$axios.post(this.$httpUrl+'/comp/share', formData).then(res=>res.data).then(res=> {\n    //         console.log(res)\n    //         if (res.code == 1) {\n    //         }\n    //     })\n    // },\n    showShareDialog(row) {\n      this.shareFile = row\n      this.searchValue = ''\n      this.dialogVisible = true\n    },\n    share() {\n      // 在这里执行分享操作\n      console.log(this.shareFile)\n      this.shareFile.id = null\n      this.$set(this.shareFile, 'userName', this.searchValue)\n      this.$axios.post(this.$httpUrl + '/comp/saveShare', this.shareFile).then(res => res.data).then(res => {\n         console.log(res)\n          this.$message.success(\"分享成功\")\n           this.searchValue = ''\n          this.shareFile = ''\n      })\n      this.dialogVisible = false;\n    },\n    searchUsers() {\n      if (this.shareUserName.trim()) {\n        this.$axios.get(`${this.$httpUrl}/user/search?name=${this.shareUserName.trim()}`).then(res => res.data).then(res => {\n          if (res && res.length > 0) {\n            const userList = res;\n            this.$autocomplete('请选择要分享的用户', userList, {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n            }).then(({ value }) => {\n              // 用户选择后更新选中的用户ID\n              this.selectedUserId = value;\n            }).catch(() => {\n              this.selectedUserId = null; // 用户取消选择时清空选中的用户ID\n            });\n          } else {\n            this.selectedUserId = null; // 未找到匹配用户时清空选中的用户ID\n            // this.$message.warning('未找到匹配的用户');\n          }\n        });\n      }\n    },\n    loadPost() {\n      this.$axios.post(this.$httpUrl + '/comp/listPageC2', {\n        pageSize: this.pageSize,\n        pageNum: this.pageNum,\n        param: {\n          userId: this.user.id,\n          fileName: this.fileName,\n          label: this.selectedTags\n        }\n      }).then(res => res.data).then(res => {\n        console.log(res)\n        if (res.code == 1) {\n          this.tableData = res.data\n          console.log(this.tableData)\n          this.total = res.total\n        } else {\n          alert('获取数据失败')\n        }\n\n      })\n    },\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n      this.pageNum = 1\n      this.pageSize = val\n      this.loadPost()\n    },\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.pageNum = val\n      this.loadPost()\n    },\n  },\n  mounted() {\n    this.loadPost()\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}